<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_purchaseorder_document_ext" inherit_id="purchase_stock.report_purchaseorder_document">

        <xpath expr="//t[@t-set='information_block']" position="replace"/>
        <xpath expr="//t[@t-set='address']" position="replace"/>


        <xpath expr="//th[@name='th_price_unit']" position="after">
            <xpath expr="//th[@name='th_taxes']" position="move"/>
        </xpath>
        <xpath expr="//td[5]" position="after">
            <xpath expr="//td[@name='td_taxes']" position="move"/>
        </xpath>

        <xpath expr="//t[@t-call='web.external_layout']/t[@t-else='']" position="replace"/>
        <xpath expr="//div[hasclass('page')]/div[@id='informations']" position="replace">
            <div id="informations" class="row mt-4 mb32">
                <div t-if="o.partner_id" class="col-4 bm-2">
                    <strong>Supplier</strong>
                    <div t-field="o.partner_id"
                         t-options='{"widget": "contact", "fields": ["address", "name", "phone", "vat"], "no_marker": True, "phone_icons": True}'/>
                </div>
                <div t-if="o.state in ['purchase','done'] and o.date_approve" class="col-4 bm-2">
                    <strong>Order Date</strong>
                    <p t-field="o.date_approve" t-options='{"widget": "date"}' class="m-0"/>
                </div>
                <div t-if="o.name" class="col-4 bm-2">
                    <strong>PO#</strong>
                    <p t-field="o.name" class="m-0"/>
                </div>
            </div>
            <div id="informations" class="row mt-4 mb32">
                <div t-if="o.user_id" class="col-4 bm-2">
                    <strong>Ordered By</strong>
                    <div t-field="o.user_id"
                         t-options='{"widget": "contact", "fields": ["name","email", "phone"], "no_marker": True, "phone_icons": True}'/>
                </div>
                <div t-if="o.picking_type_id and o.picking_type_id.warehouse_id" class="col-4 bm-2">
                    <strong>Delivery Address</strong>
                    <div t-if="o.picking_type_id and o.picking_type_id.warehouse_id">
                        <div t-field="o.picking_type_id.warehouse_id.partner_id"
                             t-options="{'widget': 'contact', 'fields': ['name','address','phone'], 'no_marker': True, 'phone_icons': True}"/>
                    </div>
                </div>
                <div t-if="o.date_planned" class="col-4 bm-2">
                    <strong>Desired Delivery Date</strong>
                    <p t-field="o.date_planned" t-options='{"widget": "date"}' class="m-0"/>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
